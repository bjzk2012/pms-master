@layout("/common/_container.html",{bg:"bg-white", plugins:[],js:["/assets/modular/business/question/question.js"]}){

<div class="layui-body-header">
    <span class="layui-body-header-title">问题管理</span>
</div>

<div class="layui-fluid">
    <table class="layui-table" id="questionTable" lay-filter="questionTable"></table>
</div>

<script type="text/html" id="toolbar">
    <div class="layui-form toolbar">
        <div class="layui-form-item">
            <div class="layui-inline">
                <input id="condition" class="layui-input" type="text" placeholder="关键字" value="{{d.where.condition}}">
            </div>
            <div class="layui-inline">
                <select id="projectId">
                    <option value="">所属项目</option>
                    @for(project in projects) {
                    <option value="${project.id}" {{'${project.id}' == d.where.projectId?'selected':''}}>${project.name}</option>
                    @}
                </select>
            </div>
            <div class="layui-inline">
                <select id="category">
                    <option value="">问题类型</option>
                    @for(category in categorys) {
                    <option value="${category.key}" {{'${category.key}' == d.where.category?'selected':''}}>${category.value}</option>
                    @}
                </select>
            </div>
            <div class="layui-inline">
                <input id="submitTimeLimit" class="layui-input" type="text" placeholder="发起时间" style="width:182px" value="{{d.where.submitTimeLimit}}"/>
            </div>
            <div class="layui-inline">
                <input id="phone" class="layui-input" type="text" placeholder="手机号" value="{{d.where.phone}}" style="width:114px;">
            </div>
            <div class="layui-inline">
                <select id="status">
                    <option value="">问题状态</option>
                    @for(status in statuses) {
                    <option value="${status.key}" {{'${status.key}' == d.where.status?'selected':''}}>${status.value}</option>
                    @}
                </select>
            </div>
            <div class="layui-inline">
                <input id="sponsor" class="layui-input" type="text" placeholder="发起人" value="{{d.where.sponsor}}">
            </div>
            <div class="layui-inline">
                <select id="liableId">
                    <option value="">责任人</option>
                    @for(user in users) {
                    <option value="${user.id}" {{'${user.id}' == d.where.liableId?'selected':''}}>${user.name}</option>
                    @}
                </select>
            </div>
            <div class="layui-inline">
                <button class="layui-btn icon-btn" lay-event="search"><i class="layui-icon">&#xe615;</i>搜索</button>
                <button class="layui-btn icon-btn" lay-event="openAdd"><i class="layui-icon">&#xe654;</i>添加</button>
            </div>
        </div>
    </div>
</script>

<script type="text/html" id="tableBar">
    <a class="layui-btn layui-btn-primary layui-btn-xs {{d.status == 'DRAFT'?'':'layui-btn-disabled'}}" lay-event="{{d.status == 'DRAFT'?'confirm':''}}">确认</a>
    <a class="layui-btn layui-btn-xs {{d.status == 'ACTIVE'?'':'layui-btn-disabled'}}"  lay-event="{{d.status == 'ACTIVE'?'appoint':''}}">指派</a>
    <a class="layui-btn layui-btn-normal layui-btn-xs {{d.status == 'ACTIVE'?'':'layui-btn-disabled'}}" lay-event="{{d.status == 'ACTIVE'?'solve':''}}">解决</a>
    <a class="layui-btn layui-btn-danger layui-btn-xs {{d.status == 'SOLVED'?'':'layui-btn-disabled'}}" lay-event="{{d.status == 'SOLVED'?'close':''}}">关闭</a>
    <a class="layui-btn  layui-btn-normal layui-btn-xs {{d.status == 'CLOSED'?'':'layui-btn-disabled'}}" lay-event="{{d.status == 'CLOSED'?'active':''}}">激活</a>
    <a class="layui-btn layui-btn-warm layui-btn-xs" lay-event="edit">编辑</a>
    <a class="layui-btn layui-btn-xs" lay-event="detail">查看</a>
</script>
@}
